function initializePubNub(){var i=new PubNub({publishKey:publishKey,subscribeKey:subscribeKey});i.addListener({message:redraw}),i.subscribe({channels:[pnChannel]}),setInterval(function(){i.publish({channel:pnChannel,message:{lat:window.lat+.001,lng:window.lng+.01}})},5e3)}window.lat=37.8199,window.lng=-122.4783;var map,mark,lineCoords=[],attachScripts=document.getElementById("attach-scripts"),mapPosition=document.getElementById("map-canvas"),publishKey="pub-c-2cf58359-5a15-4aa5-8128-b1df55439b9d",subscribeKey="sub-c-2e405b3c-347d-11e7-bb5c-02ee2ddab7fe",mapApiKey="AIzaSyCNKAUfM9XewDk1DowUNDOhVI_SZhym9Vw",windowWidth=window.innerWidth+"px",windowHeight=window.innerHeight+"px",pnChannel="map-channel",initialize=function(){map=new google.maps.Map(mapPosition,{center:{lat:lat,lng:lng},zoom:12}),mark=new google.maps.Marker({position:{lat:lat,lng:lng},map:map}),lineCoords.push(new google.maps.LatLng(window.lat,window.lng))};window.initialize=initialize;var redraw=function(i){lat=i.message.lat,lng=i.message.lng,map.setCenter({lat:lat,lng:lng,alt:0}),mark.setPosition({lat:lat,lng:lng,alt:0}),lineCoords.push(new google.maps.LatLng(lat,lng)),new google.maps.Polyline({path:lineCoords,geodesic:!0,strokeColor:"#2E10FF"}).setMap(map)};navigator.geolocation.getCurrentPosition(function(i){window.lat=i.coords.latitude,window.lng=i.coords.longitude}),cdnPubNubScript=document.createElement("script"),cdnPubNubScript.type="text/javascript",cdnPubNubScript.src="js/pubnub.4.18.0.min.js",attachScripts.appendChild(cdnPubNubScript),window.onload=function(){initializePubNub()},mapApiScript=document.createElement("script"),mapApiScript.type="text/javascript",mapApiScript.src="https://maps.googleapis.com/maps/api/js?key="+mapApiKey+"&callback=initialize",attachScripts.appendChild(mapApiScript),mapPosition.style.width=windowWidth,mapPosition.style.height=windowHeight;